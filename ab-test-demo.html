<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A/B Test Demo - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .card h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .info-item {
            margin-bottom: 10px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .info-label {
            font-weight: 600;
            color: #555;
        }

        .info-value {
            color: #667eea;
            font-weight: bold;
        }

        .variant-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .variant-original {
            background: #4CAF50;
            color: white;
        }

        .variant-test {
            background: #FF9800;
            color: white;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            text-decoration: none;
            margin: 5px;
        }

        .btn:hover {
            background: #5568d3;
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .log-container {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .log-entry {
            color: #d4d4d4;
            margin-bottom: 5px;
            padding: 5px;
            border-left: 3px solid #667eea;
            padding-left: 10px;
        }

        .log-success {
            border-left-color: #4CAF50;
        }

        .log-error {
            border-left-color: #e74c3c;
        }

        .log-info {
            border-left-color: #3498db;
        }

        .simulator {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .url-display {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #333;
            border: 2px solid #667eea;
        }

        .analytics-status {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .analytics-badge {
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 13px;
            font-weight: 600;
        }

        .analytics-ok {
            background: #d4edda;
            color: #155724;
        }

        .analytics-error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>

    <!-- A/B TEST SCRIPT -->
    <script>
    (function() {
        'use strict';

        // ============================================
        // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
        // ============================================

        var config = {
            originalUrl: '/bankruptcy',
            testUrl: '/besplatnoe-too',
            testTraffic: 50,
            cookieName: 'ab_var',
            cookieDays: 30,
            debug: true  // –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –¥–ª—è –¥–µ–º–æ
        };

        // ============================================
        // –°–ª—É–∂–µ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        // ============================================

        var debugLog = [];

        function log(message, type) {
            type = type || 'info';
            var timestamp = new Date().toLocaleTimeString();
            debugLog.push({ time: timestamp, message: message, type: type });
            console.log('[AB-Test ' + timestamp + '] ' + message);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ window –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ HTML
            if (typeof window !== 'undefined') {
                window.abTestLog = debugLog;
            }
        }

        function getCookie(name) {
            var m = document.cookie.match(new RegExp('(?:^|; )' + name + '=([^;]*)'));
            return m ? decodeURIComponent(m[1]) : null;
        }

        function setCookie(name, value, days) {
            var d = new Date();
            d.setTime(d.getTime() + days * 864e5);
            document.cookie = name + '=' + value + '; expires=' + d.toUTCString() + '; path=/; SameSite=Lax';
            log('Cookie —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: ' + name + ' = ' + value, 'success');
        }

        function hash(str) {
            var h = 0;
            for (var i = 0; i < str.length; i++) {
                h = ((h << 5) - h) + str.charCodeAt(i);
                h = h & h;
            }
            return Math.abs(h) % 100;
        }

        function getUserId() {
            var uid = getCookie('_ab_uid');
            if (!uid) {
                uid = Date.now().toString(36) + Math.random().toString(36).substr(2);
                setCookie('_ab_uid', uid, 365);
                log('–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π User ID: ' + uid, 'success');
            } else {
                log('–ù–∞–π–¥–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π User ID: ' + uid, 'info');
            }
            return uid;
        }

        function sendAnalytics(variant) {
            log('–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞: ' + variant, 'info');

            // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ (—Å–∏–º—É–ª—è—Ü–∏—è)
            if (window.ym) {
                try {
                    if (window.Ya && window.Ya._metrika) {
                        var counter = window.Ya._metrika.getCounters()[0];
                        if (counter) {
                            ym(counter.id, 'params', { ab_variant: variant });
                            log('‚úì –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –ø–∞—Ä–∞–º–µ—Ç—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω', 'success');
                        }
                    }
                } catch(e) {
                    log('‚ö† –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ (—ç—Ç–æ –Ω–æ—Ä–º–∞ –¥–ª—è –¥–µ–º–æ)', 'info');
                }
            } else {
                log('‚ö† –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞', 'info');
            }

            // Roistat (—Å–∏–º—É–ª—è—Ü–∏—è)
            if (window.roistat && window.roistat.event) {
                try {
                    roistat.event.send('ab_test', { variant: variant });
                    log('‚úì Roistat: —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ', 'success');
                } catch(e) {
                    log('‚ö† Roistat: –æ—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ - ' + e.message, 'error');
                }
            } else {
                log('‚ö† Roistat: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω', 'info');
            }
        }

        // ============================================
        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
        // ============================================

        log('===== –ó–∞–ø—É—Å–∫ A/B —Ç–µ—Å—Ç–∞ =====', 'info');
        log('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: Original=' + config.originalUrl + ', Test=' + config.testUrl + ', Traffic=' + config.testTraffic + '%', 'info');

        // –í –¥–µ–º–æ —Ä–µ–∂–∏–º–µ —á–∏—Ç–∞–µ–º –ø—É—Ç—å –∏–∑ GET –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ?page=
        var urlParams = new URLSearchParams(window.location.search);
        var path = config.debug && urlParams.get('page')
            ? urlParams.get('page')
            : window.location.pathname;

        log('–¢–µ–∫—É—â–∏–π URL: ' + path, 'info');

        var isOriginal = path.indexOf(config.originalUrl) !== -1;
        var isTest = path.indexOf(config.testUrl) !== -1;

        if (!isOriginal && !isTest) {
            log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ—Å—Ç–µ, –≤—ã—Ö–æ–¥', 'info');

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            window.abTestData = {
                active: false,
                reason: '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ—Å—Ç–µ'
            };
            return;
        }

        log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ—Å—Ç–µ: ' + (isOriginal ? 'ORIGINAL' : 'TEST'), 'success');

        var saved = getCookie(config.cookieName);
        var variant;

        if (saved) {
            variant = saved;
            log('–ù–∞–π–¥–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: ' + variant, 'success');
        } else {
            var userId = getUserId();
            var bucket = hash(userId);
            variant = bucket < config.testTraffic ? 'test' : 'original';
            log('–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. Bucket=' + bucket + ', –≤—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç: ' + variant, 'success');
            setCookie(config.cookieName, variant, config.cookieDays);
        }

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
        sendAnalytics(variant);

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        window.abTestData = {
            active: true,
            variant: variant,
            currentPage: isOriginal ? 'original' : 'test',
            userId: getCookie('_ab_uid'),
            bucket: hash(getCookie('_ab_uid')),
            needsRedirect: (variant === 'test' && isOriginal) || (variant === 'original' && isTest),
            redirectUrl: null
        };

        // –†–µ–¥–∏—Ä–µ–∫—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if (variant === 'test' && isOriginal) {
            var redirectUrl = config.testUrl + window.location.search;
            log('üîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: ' + redirectUrl, 'success');
            window.abTestData.redirectUrl = redirectUrl;

            // –í –¥–µ–º–æ —Ä–µ–∂–∏–º–µ –Ω–µ –¥–µ–ª–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç
            if (!config.debug) {
                window.location.replace(redirectUrl);
            }
        } else if (variant === 'original' && isTest) {
            var redirectUrl = config.originalUrl + window.location.search;
            log('üîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: ' + redirectUrl, 'success');
            window.abTestData.redirectUrl = redirectUrl;

            // –í –¥–µ–º–æ —Ä–µ–∂–∏–º–µ –Ω–µ –¥–µ–ª–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç
            if (!config.debug) {
                window.location.replace(redirectUrl);
            }
        } else {
            log('‚úì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è', 'success');
        }

        log('===== A/B —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω =====', 'success');
    })();
    </script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ A/B Test Simulator</h1>
            <p>–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
        </div>

        <div class="grid">
            <div class="card">
                <h2>üìä –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∞</h2>
                <div class="info-item">
                    <span class="info-label">–¢–µ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω:</span>
                    <span class="info-value" id="test-active">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–¢–µ–∫—É—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:</span>
                    <span id="current-variant">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–¢–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:</span>
                    <span class="info-value" id="current-page">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">User ID:</span>
                    <span class="info-value" id="user-id" style="font-size: 11px;">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Bucket (0-99):</span>
                    <span class="info-value" id="bucket">-</span>
                </div>
            </div>

            <div class="card">
                <h2>üéØ Cookies</h2>
                <div class="info-item">
                    <span class="info-label">ab_var:</span>
                    <span class="info-value" id="cookie-variant">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">_ab_uid:</span>
                    <span class="info-value" id="cookie-uid" style="font-size: 11px;">-</span>
                </div>
                <div style="margin-top: 15px;">
                    <button class="btn btn-danger" onclick="clearCookies()">üóë –û—á–∏—Å—Ç–∏—Ç—å cookies</button>
                </div>
            </div>

            <div class="card">
                <h2>üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                <div class="analytics-status">
                    <div class="analytics-badge" id="ym-status">
                        –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
                    </div>
                </div>
                <div class="analytics-status">
                    <div class="analytics-badge" id="roistat-status">
                        Roistat: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    </div>
                </div>
                <p style="margin-top: 15px; font-size: 13px; color: #666;">
                    –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å—á—ë—Ç—á–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä <code>ab_variant</code>
                </p>
            </div>
        </div>

        <div class="simulator">
            <h2 style="margin-bottom: 15px;">üöÄ –°–∏–º—É–ª—è—Ü–∏—è –≤—Ö–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç</h2>
            <p style="color: #666; margin-bottom: 15px;">
                –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–µ–∫–ª–∞–º—ã –Ω–∞ –≤–∞—à—É —Å—Ç—Ä–∞–Ω–∏—Ü—É:
            </p>

            <div style="text-align: center;">
                <button class="btn" onclick="simulateNewUser()" style="font-size: 18px; padding: 15px 30px; background: #4CAF50;">
                    üöÄ –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–µ—Å—Ç)
                </button>
                <p style="margin-top: 10px; font-size: 13px; color: #fff;">
                    –ù–∞–∂–∏–º–∞–π—Ç–µ —ç—Ç—É –∫–Ω–æ–ø–∫—É –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è 50/50
                </p>
            </div>

            <div class="url-display" id="simulated-url">
                –¢–µ–∫—É—â–∏–π —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL: <span id="url-text">-</span>
            </div>

            <div id="redirect-info" style="display: none; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; margin-top: 15px; border-radius: 5px;">
                <strong>üîÑ –°–∫—Ä–∏–ø—Ç —Å–¥–µ–ª–∞–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞:</strong>
                <div id="redirect-url" style="margin-top: 10px; font-family: 'Courier New'; color: #333; font-size: 16px; font-weight: bold;"></div>
                <p style="margin-top: 10px; font-size: 13px; color: #666;">
                    –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–º–µ—Å—Ç–æ /bankruptcy
                </p>
            </div>

            <div id="no-redirect-info" style="display: none; padding: 15px; background: #d4edda; border-left: 4px solid #28a745; margin-top: 15px; border-radius: 5px;">
                <strong>‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è</strong>
                <p style="margin-top: 10px; font-size: 13px; color: #155724;">
                    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /bankruptcy (–æ—Ä–∏–≥–∏–Ω–∞–ª)
                </p>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                <h3 style="margin: 0 0 15px 0; font-size: 16px; color: #333;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div style="padding: 10px; background: white; border-radius: 5px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #4CAF50;" id="stat-original">0</div>
                        <div style="font-size: 13px; color: #666;">–í–∞—Ä–∏–∞–Ω—Ç A (Original)</div>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 5px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #FF9800;" id="stat-test">0</div>
                        <div style="font-size: 13px; color: #666;">–í–∞—Ä–∏–∞–Ω—Ç B (Test)</div>
                    </div>
                </div>
                <div style="margin-top: 10px; text-align: center;">
                    <button class="btn btn-danger" onclick="resetStats()" style="font-size: 13px; padding: 8px 16px;">
                        –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    </button>
                </div>
            </div>
        </div>

        <div class="card" style="margin-top: 20px;">
            <h2>üìù –õ–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h2>
            <div class="log-container" id="log-container">
                <div class="log-entry">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function getCookie(name) {
            var m = document.cookie.match(new RegExp('(?:^|; )' + name + '=([^;]*)'));
            return m ? decodeURIComponent(m[1]) : null;
        }

        function simulateNewUser() {
            // –û—á–∏—â–∞–µ–º cookies
            document.cookie = 'ab_var=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            document.cookie = '_ab_uid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
            window.location.href = window.location.pathname + '?page=/bankruptcy&t=' + Date.now();
        }

        function resetStats() {
            localStorage.removeItem('ab_test_stats');
            updateStats();
        }

        function updateStats() {
            var stats = JSON.parse(localStorage.getItem('ab_test_stats') || '{"original": 0, "test": 0}');
            document.getElementById('stat-original').textContent = stats.original;
            document.getElementById('stat-test').textContent = stats.test;
        }

        function incrementStat(variant) {
            var stats = JSON.parse(localStorage.getItem('ab_test_stats') || '{"original": 0, "test": 0}');
            stats[variant] = (stats[variant] || 0) + 1;
            localStorage.setItem('ab_test_stats', JSON.stringify(stats));
            updateStats();
        }

        function updateUI() {
            var data = window.abTestData || {};

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            updateStats();

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤—ã–π —Ç–µ—Å—Ç (–µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä t –≤ URL)
            var urlParams = new URLSearchParams(window.location.search);
            var isNewTest = urlParams.has('t') && data.active && data.variant;

            if (isNewTest) {
                incrementStat(data.variant);
            }

            // –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∞
            document.getElementById('test-active').textContent = data.active ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç';
            document.getElementById('test-active').style.color = data.active ? '#4CAF50' : '#e74c3c';

            // –í–∞—Ä–∏–∞–Ω—Ç
            if (data.variant) {
                var badge = document.createElement('span');
                badge.className = 'variant-badge variant-' + data.variant;
                badge.textContent = data.variant === 'original' ? 'A (Original)' : 'B (Test)';
                document.getElementById('current-variant').innerHTML = '';
                document.getElementById('current-variant').appendChild(badge);
            } else {
                document.getElementById('current-variant').textContent = '-';
            }

            // –¢–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
            document.getElementById('current-page').textContent = data.currentPage || '-';

            // User ID
            document.getElementById('user-id').textContent = data.userId || '-';

            // Bucket
            document.getElementById('bucket').textContent = data.bucket !== undefined ? data.bucket + ' (<50 = Test, >=50 = Original)' : '-';

            // Cookies
            document.getElementById('cookie-variant').textContent = getCookie('ab_var') || '–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞';
            document.getElementById('cookie-uid').textContent = getCookie('_ab_uid') || '–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞';

            // –†–µ–¥–∏—Ä–µ–∫—Ç
            if (data.needsRedirect && data.redirectUrl) {
                document.getElementById('redirect-info').style.display = 'block';
                document.getElementById('redirect-url').textContent = '‚Üí ' + data.redirectUrl;
                document.getElementById('no-redirect-info').style.display = 'none';
            } else if (data.active) {
                document.getElementById('redirect-info').style.display = 'none';
                document.getElementById('no-redirect-info').style.display = 'block';
            }

            // –°–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL
            var urlParams = new URLSearchParams(window.location.search);
            var simulatedPath = urlParams.get('page') || window.location.pathname;
            document.getElementById('url-text').textContent = window.location.origin + simulatedPath;

            // –õ–æ–≥
            if (window.abTestLog) {
                var logHtml = '';
                window.abTestLog.forEach(function(entry) {
                    var className = 'log-entry';
                    if (entry.type === 'success') className += ' log-success';
                    if (entry.type === 'error') className += ' log-error';
                    if (entry.type === 'info') className += ' log-info';
                    logHtml += '<div class="' + className + '">[' + entry.time + '] ' + entry.message + '</div>';
                });
                document.getElementById('log-container').innerHTML = logHtml;
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º UI –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(updateUI, 100);
    </script>
</body>
</html>